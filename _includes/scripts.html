<script>
document.addEventListener('DOMContentLoaded', function() {
  var toggle = document.getElementById('theme-toggle');
  var icon = document.getElementById('theme-icon');
  var html = document.documentElement;

  // 1. On page load, apply theme from localStorage if it exists
  var savedTheme = localStorage.getItem('theme');
  if (savedTheme) {
    html.setAttribute('data-theme', savedTheme);
    icon.classList.toggle('fa-sun', savedTheme === 'light');
    icon.classList.toggle('fa-moon', savedTheme === 'dark');
  }

  // 2. Toggle theme and save to localStorage
  toggle.addEventListener('click', function() {
    var currentTheme = html.getAttribute('data-theme');
    var newTheme = (currentTheme === 'dark') ? 'light' : 'dark';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    icon.classList.toggle('fa-sun', newTheme === 'light');
    icon.classList.toggle('fa-moon', newTheme === 'dark');
  });
});
</script>
<script src="{{ base_path }}/assets/js/main.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{{ '/assets/js/plugins/jquery.greedy-navigation.js'| relative_url}}"></script>
{% include analytics.html %}
